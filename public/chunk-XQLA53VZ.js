import{a as I}from"./chunk-EO435ZWV.js";import{a as E,b as c,c as O,d as w,g as y,h as k,i as L,m as S,p as U,q as F,r as j}from"./chunk-RD5OQEZ5.js";import{a as N}from"./chunk-VQA6DLDJ.js";import{A as b,B as d,C as u,H as p,J as n,K as o,L as s,Ma as x,N as l,U as a,V as _,Z as C,d as z,e as h,ha as v,na as M,q as P}from"./chunk-OXL5UCVD.js";var f=z(N());var W=(()=>{let m=class m{constructor(e,t,i,r){this.router=e,this.fb=t,this.authService=i,this.imagenesService=r,this.errorMensaje="",this.currentUser=null,this.defaultEmailAdmin="serenadematei2019@gmail.com",this.defaultPasswordAdmin="123456",this.defaultEmailEspecialista1="Especialista1@cj.MintEmail.com",this.defaultPasswordEspecialista1="123456",this.defaultEmailEspecialista2="especialista2@cj.MintEmail.com",this.defaultPasswordEspecialista2="123456",this.defaultEmailPaciente1="Paciente1@cj.MintEmail.com",this.defaultPasswordPaciente1="123456",this.defaultEmailPaciente2="paciente2@cj.MintEmail.com",this.defaultPasswordPaciente2="123456",this.fotoPerfilUrls={},this.imagenPerfilUrl="",this.usuarioActual={},this.email="",this.password="",this.formReset=!1,this.formLogin=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required]]})}ngOnInit(){this.formLogin=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required]]}),Promise.all([this.loginLoadAdmin(),this.loginLoadEspecialista1(),this.loginLoadPaciente1()]).catch(e=>{console.error("Error al cargar los usuarios:",e)})}resetLoginForm(){this.formLogin.reset()}onSubmit(){this.authService.login(this.formLogin.value).then(e=>{e.user.emailVerified?f.default.fire({icon:"success",title:"Inicio de sesi\xF3n exitoso",text:"\xA1Bienvenido!",showConfirmButton:!1,timer:1500,timerProgressBar:!0}).then(()=>{this.router.navigate(["/home"])}):f.default.fire({icon:"error",title:"Error al iniciar sesi\xF3n",text:"Debes verificar tu correo electr\xF3nico antes de iniciar sesi\xF3n. Hemos enviado un correo de verificaci\xF3n a tu direcci\xF3n de correo."})}).catch(e=>{let t="Por favor, verifica tu correo electr\xF3nico y contrase\xF1a.";e.code==="auth/user-not-found"?t="El correo electr\xF3nico no existe.":e.code==="auth/wrong-password"?t="La contrase\xF1a es incorrecta.":e.message==="La cuenta a\xFAn no ha sido aprobada por el administrador."?f.default.fire({icon:"error",title:"Error al iniciar sesi\xF3n",text:"La cuenta a\xFAn no ha sido aprobada por el administrador."}):f.default.fire({icon:"error",title:"Error al iniciar sesi\xF3n",text:t})})}cargarUsuario(e,t){return h(this,null,function*(){try{let i=yield this.authService.obtenerUsuariosConFotoPerfil(e);if(i.length>0){let r=i[0];r.imagenPerfilUrl=r.imagenPerfilUrl,this.fotoPerfilUrls[e]=r.imagenPerfilUrl,this.formReset||(this.resetLoginForm(),this.formReset=!0)}else console.error("Usuario no encontrado")}catch(i){console.error("Error al cargar el usuario:",i)}})}loginLoadAdmin(){let e=this.defaultEmailAdmin,t=this.defaultPasswordAdmin;this.formLogin.setValue({email:e,password:t})}loginLoadEspecialista1(){let e=this.defaultEmailEspecialista1,t=this.defaultPasswordEspecialista1;this.cargarUsuario(e,t),this.formLogin.setValue({email:e,password:t})}loginLoadPaciente1(){let e=this.defaultEmailPaciente1,t=this.defaultPasswordPaciente1;this.cargarUsuario(e,t),this.formLogin.setValue({email:e,password:t})}loginLoadBlank(){this.email="",this.password=""}goTo(e){this.router.navigate([e])}onClickWel(e){this.router.navigate([""])}};m.\u0275fac=function(t){return new(t||m)(u(M),u(U),u(x),u(I))},m.\u0275cmp=P({type:m,selectors:[["app-login"]],standalone:!0,features:[C],decls:40,vars:4,consts:[[1,"contenido1"],[1,"login-container"],["src","assets/logo.jpeg","alt","Logo de la Cl\xEDnica",1,"logo"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Contrase\xF1a","required","",1,"form-control"],[1,"button-container"],["type","submit",1,"submit-button"],["type","button",1,"back-button",3,"click"],[1,"register"],[2,"cursor","pointer",3,"click"],[1,"error"],[1,"profile-buttons-container"],[1,"item"],["type","button",1,"profile-button",3,"click"],["src","assets/administrador.png","alt","Admin",1,"fotoPerfil"],["alt","Especialista",1,"fotoPerfil",3,"src"],["alt","Paciente",1,"fotoPerfil",3,"src"]],template:function(t,i){t&1&&(n(0,"body")(1,"div",0)(2,"div",1),s(3,"img",2),n(4,"h2"),a(5,"Iniciar sesi\xF3n"),o(),n(6,"form",3),l("ngSubmit",function(){return i.onSubmit()}),n(7,"div",4)(8,"label",5),a(9,"Nombre de usuario:"),o(),s(10,"input",6),o(),n(11,"div",4)(12,"label",7),a(13,"Contrase\xF1a:"),o(),s(14,"input",8),o(),n(15,"div",9)(16,"button",10),a(17,"Iniciar sesi\xF3n"),o()(),n(18,"button",11),l("click",function(A){return i.onClickWel(A)}),a(19,"Volver a inicio"),o(),n(20,"div",12)(21,"p"),a(22,"No tienes una cuenta? "),n(23,"a",13),l("click",function(){return i.goTo("/registrarse")}),a(24,"Registrate"),o()()()(),n(25,"div",14)(26,"p"),a(27),o()(),n(28,"div",15)(29,"label"),a(30,"Ingresar con perfiles gen\xE9ricos:"),o(),n(31,"div",16)(32,"button",17),l("click",function(){return i.loginLoadAdmin()}),s(33,"img",18),o()(),n(34,"div",16)(35,"button",17),l("click",function(){return i.loginLoadEspecialista1()}),s(36,"img",19),o()(),n(37,"div",16)(38,"button",17),l("click",function(){return i.loginLoadPaciente1()}),s(39,"img",20),o()()()()()()),t&2&&(d(6),p("formGroup",i.formLogin),d(21),_(i.errorMensaje),d(9),p("src",i.fotoPerfilUrls[i.defaultEmailEspecialista1],b),d(3),p("src",i.fotoPerfilUrls[i.defaultEmailPaciente1],b))},dependencies:[v,F,y,E,O,w,S,j,k,L],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:#3f748a;min-height:100vh;margin:0;display:flex;justify-content:center;align-items:center;padding:0}.form-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;border-radius:4px;border:1px solid #ced4da}.profile-buttons-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.profile-buttons-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:40;display:block;margin-bottom:15px}.item[_ngcontent-%COMP%]{display:inline-block;margin:0 15px}.profile-button[_ngcontent-%COMP%]{background-color:#007bff;border:none;border-radius:50%;width:70px;height:70px;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:transform .3s ease-in-out;position:relative}.profile-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.profile-button[_ngcontent-%COMP%]   img.fotoPerfil[_ngcontent-%COMP%]{width:300%;height:110%;border-radius:50%}.profile-button[_ngcontent-%COMP%]:after{content:attr(alt);position:absolute;bottom:-25px;left:50%;transform:translate(-50%);font-size:14px;color:#007bff;visibility:hidden;opacity:0;transition:opacity .3s ease-in-out}.profile-button[_ngcontent-%COMP%]:hover:after{visibility:visible;opacity:1}.contenido1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}.login-container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;text-align:center;width:400px;animation:_ngcontent-%COMP%_slideUp .8s ease-out}.logo[_ngcontent-%COMP%]{width:350px}h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#34495e}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:1px solid #ccc;font-size:14px}.button-container[_ngcontent-%COMP%]{margin-top:20px}.submit-button[_ngcontent-%COMP%], .back-button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border-radius:30px;border:none;color:#fff;cursor:pointer;transition:background-color .3s}.submit-button[_ngcontent-%COMP%]{background-color:#34495e}.submit-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.back-button[_ngcontent-%COMP%]{background-color:#34495e;margin-top:10px}.back-button[_ngcontent-%COMP%]:hover{background-color:#ff5b62}.register[_ngcontent-%COMP%]{margin-top:15px}.register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3498db;text-decoration:none}.error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red;font-size:14px}.fotoPerfil[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px)}to{transform:translateY(0)}}"]});let g=m;return g})();export{W as LoginComponent};
